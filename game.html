<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Perfect - Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="main-container game-container">
        
        <div class="hud invisible" id="gameHud" style="max-width: 1100px;">
            <div class="hud-box left">
                <div class="hud-label">Punkte</div>
                <div class="hud-value highlight" id="scoreDisplay">0</div>
            </div>
            <div class="hud-box center">
                <div class="hud-label">Runde</div>
                <div class="hud-value"><span id="roundDisplay">1</span>/5</div>
            </div>
            <div class="hud-box right">
                <div class="hud-label">Modus <span class="diff-badge" id="modeBadge">NORMAL</span></div>
                <div class="hud-value" id="lastDistance">-</div>
            </div>
        </div>

        <div class="timer-container" id="timerContainer" style="max-width: 1100px;">
            <div class="timer-bar" id="timerBar"></div>
        </div>

        <div class="game-wrapper">
            
            <canvas id="gameCanvas" width="1100" height="650"></canvas>

            <div class="overlay hidden" id="introOverlay" style="background-color: rgba(15,23,42,0.95);">
                <h1 class="main-title">Pixel Perfect</h1>
                <p class="instruction-text">Bitte w채hle eine Option</p>
                
                <button class="btn" onclick="chooseGuest()">Als Gast spielen</button>
                <button class="btn btn-secondary" onclick="chooseLogin()">Login</button>
            </div>

            <div class="overlay hidden" id="authOverlay" style="background-color: rgba(15,23,42,0.95);">
                <h1 class="main-title">Gast Zugang</h1>
                <p class="instruction-text">Wie sollen wir dich nennen?</p>
                
                <input type="text" id="playerNameInput" class="input-name" placeholder="Dein Name" maxlength="12" autocomplete="off">
                
                <div class="button-row">
                    <button class="btn btn-small btn-secondary" onclick="backToIntro()">Zur체ck</button>
                    <button class="btn btn-small" onclick="createAccount()">Start</button>
                </div>
            </div>

            <div class="overlay hidden" id="startScreen">
                
                <div class="arc-profile-container" onclick="triggerXPAnim()" ondblclick="devLevelUp()">
                    <div class="arc-circle-wrapper">
                        <svg class="progress-ring" height="60" width="60">
                            <circle class="progress-ring__circle-bg" cx="30" cy="30" r="28"></circle>
                            <circle class="progress-ring__circle" cx="30" cy="30" id="arcProgress" r="28"></circle>
                        </svg>
                        <div class="arc-level-text" id="arcLevel">1</div>
                    </div>
                    <div class="arc-name" id="arcName">GAST</div>
                    <div class="xp-tooltip" id="xpTooltip">XP Info</div>
                </div>

                <h1 class="main-title dashboard-title" id="mainTitle">Pixel Perfect</h1>

                <div class="main-nav">
                    <button class="nav-btn active" id="navModi" onclick="switchMainTab('modes')">Modi</button>
                    <button class="nav-btn" id="navTower" onclick="switchMainTab('tower')">Tower</button>
                </div>

                <div id="viewModes" class="menu-split-layout">
                    <div class="menu-left">
                        <div class="modes-grid" id="modesGrid"></div>
                    </div>
                    <div class="menu-right">
                        <div class="mode-desc" id="descArea">Beschreibung wird geladen...</div>
                        <div class="settings-grid hidden" id="settingsArea"></div>
                        <div class="action-area">
                            <button class="btn" id="startBtn" onclick="startGame()">STARTEN</button>
                            <button class="nav-btn logout" onclick="logout()">LOGOUT</button>
                        </div>
                    </div>
                </div>

                <div class="hidden" id="viewTower" style="width: 100%; height: 100%;"></div>
            </div>

            <div class="overlay hidden" id="nextOverlay" style="background-color: transparent;">
                <div class="popup-card">
                    <div class="hud-label">ERGEBNIS</div>
                    <div class="score-big" id="roundScoreVal">+0</div>
                    <div id="roundFeedback" class="feedback-text">-</div>
                    <button class="btn" id="nextBtn" onclick="nextRound()">Weiter</button>
                </div>
            </div>

            <div class="overlay hidden" id="endScreen" style="justify-content: center; background-color: rgba(15,23,42,0.95);">
                <h1 id="endTitle" class="main-title">Gut gemacht!</h1>
                <div class="score-big" id="finalScore">0</div>
                <div class="xp-display">
                    <div class="hud-label">Gesammelte XP</div>
                    <div id="earnedXp" class="xp-value">+0 XP</div>
                </div>
                <button class="btn" onclick="backToMenu()">Zur체ck zum Men체</button>
            </div>

        </div>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>